{"version":3,"file":"ws-server.js","sourceRoot":"","sources":["../src/ws-server.ts"],"names":[],"mappings":";;AAmBA,2BAA6B;AAC7B,6BAA+B;AAC/B,yBAA2B;AAC3B,uBAAyB;AAEzB,8BAAgC;AAGhC,uCAAyC;AACzC,uCAAyG;AACzG,uDAAgE;AAEhE;IAYE,yBAAY,cAA4C;QAA5C,+BAAA,EAAA,mBAA4C;QATxC,cAAS,GAAW,QAAQ,CAAC;QAC5B,SAAI,GAAW,IAAI,CAAC;QACpB,YAAO,GAAW,SAAS,CAAC;QAC5B,cAAS,GAAY,IAAI,CAAC;QAG1B,eAAU,GAAgB,IAAI,GAAG,EAAU,CAAC;QAC5C,kBAAa,GAAwC,EAAE,CAAC;QAIvE,IAAI,cAAc,YAAY,yBAAU,IAAI,CAAC,OAAO,cAAc,CAAC,SAAS,KAAK,UAAU,CAAC,EAAE;YAC5F,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC,SAAS,EAAE,CAAC;YAC7C,IAAI,CAAC,IAAI,GAAG,cAAc,CAAC,OAAO,EAAE,CAAC;YACrC,IAAI,CAAC,MAAM,GAAG,cAAc,CAAC,MAAM,KAAK,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;SAEhE;aAAM,IAAI,OAAO,cAAc,KAAK,QAAQ,EAAE;YAC7C,IAAI,MAAM,GAA2B,cAAc,CAAC;YAEpD,IAAI,MAAM,CAAC,IAAI,KAAK,SAAS,EAAE;gBAC7B,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;aACzB;YACD,IAAI,MAAM,CAAC,OAAO,KAAK,SAAS,EAAE;gBAChC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;aAC/B;YAGD,IAAI,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,UAAU,EAAE;gBACzC,IAAI,OAAO,GAAQ,EAAE,CAAC;gBACtB,OAAO,CAAC,GAAG,GAAG,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;gBAChD,OAAO,CAAC,IAAI,GAAG,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;gBAClD,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;aAC/C;iBAAM;gBACL,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;aACvC;SACF;aAAM;YACL,MAAM,IAAI,KAAK,CAAC,mFAAmF,CAAC,CAAC;SACtG;IACH,CAAC;IAEM,+BAAK,GAAZ,UAAa,QAAkB;QAA/B,iBAiCC;QAhCC,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAC,iCAA+B,CAAC,IAAI,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,aAAQ,IAAI,CAAC,IAAM,CAAC,CAAC;QAC/I,OAAO,IAAI,OAAO,CAAO,UAAC,OAAO,EAAE,MAAM;YAGvC,KAAI,CAAC,UAAU,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,OAAO,EAAE,MAAM,EAAE,IAAI;gBAClD,IAAM,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;gBAEjD,IAAI,YAAY,GAAG,KAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;gBAEhD,IAAI,YAAY,EAAE;oBAChB,YAAY,CAAC,aAAa,CAAC,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,UAAC,EAAE;wBACnD,YAAY,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;oBAC/C,CAAC,CAAC,CAAC;iBACJ;qBAAM;oBACL,MAAM,CAAC,OAAO,EAAE,CAAC;iBAClB;YACH,CAAC,CAAC,CAAC;YAEH,IAAI,KAAI,CAAC,SAAS,EAAE;gBAClB,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,GAAU,IAAO,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChE,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE;oBAEhC,KAAI,CAAC,UAAU,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,GAAU;wBACrC,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAC,6BAA2B,KAAI,CAAC,IAAI,iBAAY,GAAG,CAAC,OAAS,CAAC,CAAC;oBACtG,CAAC,CAAC,CAAC;oBACH,OAAO,EAAE,CAAC;gBACZ,CAAC,CAAC,CAAC;gBACH,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAI,CAAC,IAAI,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC;aACjD;iBAAM;gBACL,OAAO,EAAE,CAAC;aACX;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,8BAAI,GAAX;QAAA,iBAeC;QAdC,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAC,sCAAoC,IAAI,CAAC,IAAM,CAAC,CAAC;QACtF,OAAO,IAAI,OAAO,CAAO,UAAC,OAAO,EAAE,MAAM;YACvC,KAAK,IAAI,IAAI,IAAI,KAAI,CAAC,aAAa,EAAE;gBACnC,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,CAAC;aAClC;YAGD,IAAI,KAAI,CAAC,SAAS,EAAE;gBAClB,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAC,0CAA0C,CAAC,CAAC;gBACjF,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,GAAU,IAAO,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChE,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,cAAQ,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpD,KAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;aACzB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,iCAAO,GAAd;QACE,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,IAAI,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,KAAK,QAAQ,EAAE;YAC9E,OAAqB,IAAI,CAAC,UAAU,CAAC,OAAO,EAAG,CAAC,IAAI,CAAC;SACtD;aAAM;YAEL,OAAO,CAAC,CAAC,CAAC;SACX;IACH,CAAC;IAEM,gCAAM,GAAb,UAAc,KAAmB;QAAjC,iBAsEC;QApEC,IAAI,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;QAExB,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;YAC9B,KAAK,GAAG,cAAO,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;SAC3C;QAED,IAAI,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,EAAE;YAEzB,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAC,6BAA2B,IAAI,CAAC,OAAO,EAAE,kBAAa,KAAK,CAAC,KAAK,sBAAiB,KAAK,QAAK,CAAC,CAAC;YAGnI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;oCAGlB,SAAS;gBAChB,IAAI,IAAI,GAAG,GAAG,GAAG,kBAAkB,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,OAAK,SAAS,GAAG,GAAG,GAAG,kBAAkB,CAAC,SAAS,CAAC,CAAC;gBAExG,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAC,6BAA2B,OAAK,OAAO,EAAE,kCAA6B,IAAI,MAAG,CAAC,CAAC;gBACpH,OAAK,aAAa,CAAC,IAAI,CAAC,GAAG,IAAI,SAAS,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;gBACpE,OAAK,aAAa,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,YAAY,EAAE,UAAC,EAAE,EAAE,GAAG;oBAChD,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAC,6BAA2B,KAAI,CAAC,OAAO,EAAE,kCAA6B,IAAI,eAAU,cAAO,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,aAAa,CAAC,SAAI,GAAG,CAAC,UAAU,CAAC,UAAY,CAAC,CAAC;oBAC5M,KAAK,CAAC,cAAc,CAAC,SAAS,EAE5B,UAAC,IAAI;wBACH,IAAI,OAAO,CAAC;wBACZ,IAAI;4BACF,OAAO,GAAG,oBAAa,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,IAAI,EAAE,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC;yBAClF;wBAAC,OAAM,GAAG,EAAE;4BACX,OAAO,CAAC,IAAI,CAAC,sBAAsB,EAAC,wBAAsB,KAAI,CAAC,OAAO,EAAE,wCAAmC,SAAS,UAAK,GAAG,CAAC,OAAO,MAAG,CAAC,CAAC;4BACzI,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,CAAA;4BACzB,OAAO;yBACR;wBAED,QAAQ,OAAO,CAAC,IAAI,EAAE;4BACpB,KAAK,kBAAkB,CAAC;4BACxB,KAAK,YAAY;gCACf,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;gCACjC,MAAM;4BACR;gCACE,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gCACtB,MAAM;yBACT;oBACH,CAAC,CAIF;yBACA,IAAI,CAAC,cAAM,OAAA,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW,CAAC,EAAxB,CAAwB,CAAC;yBACpC,KAAK,CAAC,UAAC,GAAU,IAAK,OAAA,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,EAAzB,CAAyB,CAAC,CAAC;oBAClD,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE;wBACb,KAAK,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAA;wBAEjC,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAC,6BAA2B,KAAI,CAAC,OAAO,EAAE,gCAA2B,IAAI,eAAU,cAAO,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,aAAa,CAAC,SAAI,GAAG,CAAC,UAAU,CAAC,UAAY,CAAC,CAAC;oBAC5M,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;gBAEH,KAAoB,UAAsB,EAAtB,KAAA,cAAO,CAAC,YAAY,EAAE,EAAtB,cAAsB,EAAtB,IAAsB,EAAE;oBAAvC,IAAI,OAAO,SAAA;oBACZ,IAAI,IAAI,GAAG,OAAK,MAAM,GAAG,KAAK,GAAG,OAAO,GAAG,GAAG,GAAG,OAAK,OAAO,EAAE,GAAG,IAAI,CAAC;oBACvE,IAAI,IAAI,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,oBAAa,CAAC,OAAO,CAAC,CAAC;oBACpD,IAAI,CAAC,EAAE,GAAG,gBAAgB,CAAC;oBAC3B,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC3C,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAC,6BAA2B,OAAK,OAAO,EAAE,kBAAa,IAAI,oBAAe,SAAS,MAAG,CAAC,CAAC;iBAC7H;;;YAhDH,KAAK,IAAI,SAAS,IAAI,KAAK,CAAC,MAAM;wBAAzB,SAAS;aAiDjB;SACF;QACD,OAAO,IAAI,OAAO,CAAO,UAAC,OAAO,EAAE,MAAM;YACvC,OAAO,EAAE,CAAC;QACZ,CAAC,CAAC,CAAC;IACL,CAAC;IACH,sBAAC;AAAD,CAAC,AAlLD,IAkLC"}