{"version":3,"file":"mqtt-broker-server.js","sourceRoot":"","sources":["../src/mqtt-broker-server.ts"],"names":[],"mappings":"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"}